---
layout: post
title: async
date: 2022-02-18
tags: [async, await]
splash_img_source: /assets/img/books-1204029_1920.jpg
splash_img_caption: Representative image. Image by <a href="https://pixabay.com/users/luboshouska-198496/">LubosHouska</a> on Pixabay.
---

- **비동기 처리 문법**
  - `async`와 `await`은 `Promise`를 깔끔히 사용할 수 있해주는 키워드입니다.
  - 비동기 함수를 `async` 함수로 만들기 위해서는 `function()`앞에 `async` 키워드를 추가합니다.
  - `async function()`은 `Promise`를 반환시킵니다.
  ```jsx
  async function hello() {
    return "Hello";
  }
  hello(); // Promise { 'Hello' }
  ```
  - `await`은 `async` 함수 안에서만 사용할 수 있으며, 반드시 프라미스를 반환해야 합니다.
  - 자바스크립트는 `await` 키워드를 만나면 프라미스가 처리(settled)될 때까지 기다립니다. 결과는 그 이후 반환됩니다.
  ```jsx
  function sleep(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }

  async function process() {
    console.log("안녕하세요!");
    await sleep(1000); // 1초쉬고
    console.log("반갑습니다!");
  }

  process();
  ```
  - 프라미스를 처리할 때 `.then`으로 다음 동작을 정의했던 것 대신에, `await` 키워드를 사용하면 가독성을 높여줄 수 있습니다.

<br>

- **에러 핸들링**
  - `async`와 `await` 구문에서는 `try ... catch`를 통해 예외를 처리할 수 있습니다.
  - 프라미스에서 예외 처리를 위해 `.catch()`를 이용했던 것처럼, `async`에서는 `catch { ... }` 를 이용하면 됩니다.
  ```jsx
  async function test() {
    try {
      const response = await fetch("http://유효하지-않은-주소");
    } catch (err) {
      alert(err); // 에러 핸들링
    }
  }
  ```
